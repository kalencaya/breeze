<div [dMovable]="true" [handle]="header" [moveEl]="parent">
  <div class="modal-header" #header>
    <da-layout-row [daGutter]="[12, 12]">
      <da-col-item [daSpan]="22">
        {{ 'app.common.operate.edit.title' | translate: data.title }}
      </da-col-item>
      <da-col-item [daSpan]="2" style="text-align: right">
        <d-button
          icon="icon-close"
          bsStyle="text-dark"
          title="{{ 'app.common.operate.close.label' | translate }}"
          (btnClick)="data.onClose()"
        ></d-button>
      </da-col-item>
    </da-layout-row>
  </div>
  <form dForm ngForm [layout]="formLayout" [dValidateRules]="formConfig.rule" #form="dValidateRules" (dSubmit)="submitForm($event)">
    <div class="modal-body" style="margin: 0px 24px 0px 24px; padding: bottom 0px">
      <da-layout-row [daSpace]="24">
        <da-layout-col>
          <d-form-item>
            <d-form-label [required]="true">{{ 'admin.userName' | translate }}</d-form-label>
            <d-form-control class="form-control-width">
              <input
                dTextInput
                name="userName"
                [(ngModel)]="formData.userName"
                [dValidateRules]="formConfig.userNameRules"
                [disabled]="true"
              />
            </d-form-control>
          </d-form-item>
        </da-layout-col>
        <da-layout-col>
          <d-form-item>
            <d-form-label [required]="true">{{ 'admin.email' | translate }}</d-form-label>
            <d-form-control class="form-control-width">
              <input dTextInput name="email" [(ngModel)]="formData.email" [dValidateRules]="formConfig.emailRules" [disabled]="true" />
            </d-form-control>
          </d-form-item>
        </da-layout-col>
      </da-layout-row>
      <da-layout-row [daSpace]="24">
        <da-layout-col>
          <d-form-item>
            <d-form-label>{{ 'admin.nickName' | translate }}</d-form-label>
            <d-form-control class="form-control-width">
              <input dTextInput name="nickName" [(ngModel)]="formData.nickName" [dValidateRules]="formConfig.nickNameRules" />
            </d-form-control>
          </d-form-item>
        </da-layout-col>
        <da-layout-col>
          <d-form-item>
            <d-form-label>{{ 'admin.realName' | translate }}</d-form-label>
            <d-form-control class="form-control-width">
              <input dTextInput name="realName" [(ngModel)]="formData.realName" [dValidateRules]="formConfig.realNameRules" />
            </d-form-control>
          </d-form-item>
        </da-layout-col>
      </da-layout-row>
      <da-layout-row [daSpace]="24">
        <da-layout-col>
          <d-form-item>
            <d-form-label>{{ 'admin.mobilePhone' | translate }}</d-form-label>
            <d-form-control class="form-control-width">
              <input dTextInput name="mobilePhone" [(ngModel)]="formData.mobilePhone" [dValidateRules]="formConfig.mobilePhoneRules" />
            </d-form-control>
          </d-form-item>
        </da-layout-col>
        <da-layout-col>
          <d-form-item>
            <d-form-label>{{ 'admin.gender' | translate }}</d-form-label>
            <d-form-control class="form-control-width">
              <d-select
                [options]="genderList"
                name="gender"
                [filterKey]="'label'"
                [(ngModel)]="formData.gender"
                [extraConfig]="{ selectedItemWithTemplate: { enable: true } }"
              >
                <ng-template let-option="option"> {{ option['value'] + '-' + option['label'] }} </ng-template>
              </d-select>
            </d-form-control>
          </d-form-item>
        </da-layout-col>
      </da-layout-row>
      <da-layout-row [daSpace]="24">
        <da-layout-col>
          <d-form-item>
            <d-form-label>{{ 'admin.idCardType' | translate }}</d-form-label>
            <d-form-control class="form-control-width">
              <d-select
                [options]="idCardTypeList"
                name="idCardType"
                [filterKey]="'label'"
                [(ngModel)]="formData.idCardType"
                [extraConfig]="{ selectedItemWithTemplate: { enable: true } }"
              >
                <ng-template let-option="option"> {{ option['value'] + '-' + option['label'] }} </ng-template>
              </d-select>
            </d-form-control>
          </d-form-item>
        </da-layout-col>
        <da-layout-col>
          <d-form-item>
            <d-form-label>{{ 'admin.idCardNo' | translate }}</d-form-label>
            <d-form-control class="form-control-width">
              <input dTextInput name="idCardNo" [(ngModel)]="formData.idCardNo" [dValidateRules]="formConfig.idCardNoRules" />
            </d-form-control>
          </d-form-item>
        </da-layout-col>
      </da-layout-row>
      <da-layout-row [daSpace]="24">
        <da-layout-col>
          <d-form-item>
            <d-form-label>{{ 'admin.nation' | translate }}</d-form-label>
            <d-form-control class="form-control-width">
              <d-select
                [options]="nationList"
                name="nation"
                [filterKey]="'label'"
                [(ngModel)]="formData.nation"
                [extraConfig]="{ selectedItemWithTemplate: { enable: true } }"
              >
                <ng-template let-option="option"> {{ option['value'] + '-' + option['label'] }} </ng-template>
              </d-select>
            </d-form-control>
          </d-form-item>
        </da-layout-col>
        <da-layout-col>
          <d-form-item>
            <d-form-label>{{ 'admin.birthday' | translate }}</d-form-label>
            <d-form-control class="form-control-width">
              <div class="devui-input-group devui-dropdown-origin form-control-width">
                <input
                  class="devui-input devui-form-control"
                  dDatepicker
                  #birthdayDp="datepicker"
                  (click)="birthdayDp.toggle()"
                  name="birthday"
                  [(ngModel)]="formData.birthday"
                  dateFormat="y-MM-dd"
                  mode="date"
                />
                <div *ngIf="formData.birthday" class="devui-input-group-addon close-icon-wrapper" (click)="birthdayDp.clearAll()">
                  <i class="icon icon-close"></i>
                </div>
                <div class="devui-input-group-addon" (click)="birthdayDp.toggle()">
                  <i class="icon icon-calendar"></i>
                </div>
              </div>
            </d-form-control>
          </d-form-item>
        </da-layout-col>
      </da-layout-row>
      <da-layout-row [daSpace]="24">
        <da-layout-col>
          <d-form-item>
            <d-form-label>{{ 'admin.qq' | translate }}</d-form-label>
            <d-form-control class="form-control-width">
              <input dTextInput name="qq" [(ngModel)]="formData.qq" [dValidateRules]="formConfig.qqRules" />
            </d-form-control>
          </d-form-item>
        </da-layout-col>
        <da-layout-col>
          <d-form-item>
            <d-form-label>{{ 'admin.wechat' | translate }}</d-form-label>
            <d-form-control class="form-control-width">
              <input dTextInput name="wechat" [(ngModel)]="formData.wechat" [dValidateRules]="formConfig.wechatRules" />
            </d-form-control>
          </d-form-item>
        </da-layout-col>
      </da-layout-row>
      <da-layout-row [daSpace]="24">
        <da-layout-col>
          <d-form-item>
            <d-form-label>{{ 'admin.summary' | translate }}</d-form-label>
            <d-form-control>
              <textarea
                dTextarea
                name="summary"
                [(ngModel)]="formData.summary"
                [dValidateRules]="formConfig.summaryRules"
                style="width: 584px; height: 80px"
              ></textarea>
            </d-form-control>
          </d-form-item>
        </da-layout-col>
      </da-layout-row>
    </div>
    <div class="modal-footer" style="text-align: right; margin-right: 24px">
      <d-form-operation>
        <d-button style="margin-right: 4px" bsStyle="common" (click)="data.onClose($event)">{{
          'app.common.operate.cancel.label' | translate
        }}</d-button>
        <d-button bsStyle="primary" dFormSubmit>{{ 'app.common.operate.confirm.label' | translate }}</d-button>
      </d-form-operation>
    </div>
  </form>
</div>
