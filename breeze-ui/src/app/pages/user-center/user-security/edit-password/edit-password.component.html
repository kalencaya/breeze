<div [dMovable]="true" [handle]="header" [moveEl]="parent">
  <div class="modal-header" #header>
    <da-layout-row [daGutter]="[24, 24]">
      <da-col-item [daSpan]="22">
        {{ data.title }}
      </da-col-item>
      <da-col-item [daSpan]="2" style="text-align: right">
        <d-button
          icon="icon-close"
          bsStyle="text-dark"
          title="{{ 'app.common.operate.close.label' | translate }}"
          (btnClick)="data.onClose()"
        ></d-button>
      </da-col-item>
    </da-layout-row>
  </div>
  <form dForm ngForm [layout]="'horizontal'" [dValidateRules]="formConfig.rule" #form="dValidateRules" (dSubmit)="submitForm($event)">
    <div class="modal-body" style="padding: 12px 48px 0px 48px">
      <d-form-item>
        <d-form-label [required]="true">{{ 'userCenter.oldPassword' | translate }}:</d-form-label>
        <d-form-control [suffixTemplate]="suffixTemplate0">
          <input
            dTextInput
            dValidateSyncKey="oldPassword"
            [type]="showOldPassword ? 'text' : 'password'"
            name="oldPassword"
            [(ngModel)]="formData.oldPassword"
            [dValidateRules]="formConfig.oldPasswordRules"
          />
        </d-form-control>
      </d-form-item>
      <d-form-item>
        <d-form-label [required]="true">{{ 'userCenter.password' | translate }}:</d-form-label>
        <d-form-control [suffixTemplate]="suffixTemplate1">
          <input
            dTextInput
            dValidateSyncKey="password"
            [type]="showPassword ? 'text' : 'password'"
            name="password"
            [(ngModel)]="formData.password"
            [dValidateRules]="formConfig.passwordRules"
          />
        </d-form-control>
      </d-form-item>
      <d-form-item>
        <d-form-label [required]="true">{{ 'userCenter.confirmPassword' | translate }}:</d-form-label>
        <d-form-control [suffixTemplate]="suffixTemplate2">
          <input
            dTextInput
            dValidateSyncKey="password"
            [type]="showConfirmPassword ? 'text' : 'password'"
            name="confirmPassword"
            [(ngModel)]="formData.confirmPassword"
            [dValidateRules]="formConfig.confirmPasswordRules"
          />
        </d-form-control>
      </d-form-item>
    </div>
    <div class="modal-footer" style="text-align: right; padding-right: 48px">
      <d-form-operation>
        <d-button style="margin-right: 4px" bsStyle="common" (click)="data.onClose($event)">{{
          'app.common.operate.cancel.label' | translate
        }}</d-button>
        <d-button bsStyle="primary" dFormSubmit>{{ 'app.common.operate.confirm.label' | translate }}</d-button>
      </d-form-operation>
    </div>
  </form>
</div>
<ng-template #suffixTemplate0>
  <i [class]="showOldPassword ? 'icon icon-preview' : 'icon icon-preview-forbidden'" (click)="showOldPassword = !showOldPassword"></i>
</ng-template>
<ng-template #suffixTemplate1>
  <i [class]="showPassword ? 'icon icon-preview' : 'icon icon-preview-forbidden'" (click)="showPassword = !showPassword"></i>
</ng-template>
<ng-template #suffixTemplate2>
  <i
    [class]="showConfirmPassword ? 'icon icon-preview' : 'icon icon-preview-forbidden'"
    (click)="showConfirmPassword = !showConfirmPassword"
  ></i>
</ng-template>
